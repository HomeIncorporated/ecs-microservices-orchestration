{
    "type": "APPMESH",
    "containerName": "envoy",
    "properties": [
        {
            "name": "IgnoredUID",
            "value": "1390"
        },
        {
            "name": "ProxyIngressPort",
            "value": "${container_port}"
        },
        {
            "name": "ProxyEgressPort",
            "value": "15001"
        },
        {
            "name": "AppPorts",
            "value": "${container_port}"
        },
        {
            "name": "EgressIgnoredIPs",
            "value": "169.254.170.2,169.254.169.254"
        }
    ]
},
{
    "name": "envoy",
    "image": "111345817488.dkr.ecr.${region}.amazonaws.com/aws-appmesh-envoy:v1.11.1.1-prod",
    "essential": true,
    "memory" : ${envoy_mem},
    "cpu" : ${envoy_cpu},
    "environment": [{
      "name": "APPMESH_VIRTUAL_NODE_NAME",
      "value": "mesh/meshName/virtualNode/virtualNodeName"
    }],
    "healthCheck": {
      "command": [
        "CMD-SHELL",
        "curl -s http://0.0.0.0:9901/server_info | grep state | grep -q LIVE"
      ],
      "startPeriod": 10,
      "interval": 5,
      "timeout": 2,
      "retries": 3
    },
    "user": "1337"
  }